<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>Aurora Luo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Docsify ä¸»é¢˜æ ·å¼ï¼ˆå¤šé‡å›è½ï¼‰ -->
    <link id="docsify-theme" rel="stylesheet"
      href="https://unpkg.com/docsify@4/themes/vue.css"
      onerror="this.href='https://cdn.jsdelivr.net/npm/docsify@4/themes/vue.css';this.onerror=null;" />

    <!-- è‡ªå®šä¹‰æ ·å¼ï¼šç›¸å¯¹è·¯å¾„ï¼Œé€‚é… GitHub Pages é¡¹ç›®é¡µäºŒçº§è·¯å¾„ -->
    <link rel="stylesheet" href="assets/css/custom.css" />
  </head>

  <body>
    <!-- Docsify åº”ç”¨æŒ‚è½½ç‚¹ -->
    <div id="app">åŠ è½½ä¸­...</div>

    <!-- å›ºå®šå³ä¸Šè§’ä¸»é¢˜åˆ‡æ¢ -->
    <div id="aurora-theme-toggle">
      <button id="theme-switch-btn" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ“</button>
    </div>

    <!-- å›åˆ°é¡¶éƒ¨ -->
    <button id="back-to-top" title="è¿”å›é¡¶éƒ¨" aria-label="è¿”å›é¡¶éƒ¨">â†‘</button>

    <!-- é˜…è¯»è¿›åº¦æ¡ -->
    <div id="reading-progress"></div>

    <!-- ========= Docsify æ ¸å¿ƒï¼šä¸‰é‡å›è½ ========= -->
    <script>
      (function loadScript(srcs, attr) {
        function tryLoad(i) {
          if (i >= srcs.length) return;
          var s = document.createElement('script');
          s.src = srcs[i];
          if (attr && attr.defer) s.defer = true;
          s.onerror = function(){ tryLoad(i+1); };
          document.head.appendChild(s);
        }
        // docsify ä¸»åº“
        tryLoad(0);
      })([
        'https://unpkg.com/docsify@4/lib/docsify.min.js',
        'https://cdn.jsdelivr.net/npm/docsify@4/lib/docsify.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/docsify/4.13.1/docsify.min.js'
      ], {defer:true});
    </script>

    <!-- æœç´¢æ’ä»¶ -->
    <script>
      (function loadScript(srcs) {
        function tryLoad(i) {
          if (i >= srcs.length) return;
          var s = document.createElement('script');
          s.src = srcs[i]; s.defer = true;
          s.onerror = function(){ tryLoad(i+1); };
          document.head.appendChild(s);
        }
        tryLoad(0);
      })([
        'https://unpkg.com/docsify@4/lib/plugins/search.min.js',
        'https://cdn.jsdelivr.net/npm/docsify@4/lib/plugins/search.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/docsify/4.13.1/plugins/search.min.js'
      ]);
    </script>

    <!-- å¤åˆ¶ä»£ç æŒ‰é’®æ’ä»¶ -->
    <script>
      (function loadScript(srcs) {
        function tryLoad(i) {
          if (i >= srcs.length) return;
          var s = document.createElement('script');
          s.src = srcs[i]; s.defer = true;
          s.onerror = function(){ tryLoad(i+1); };
          document.head.appendChild(s);
        }
        tryLoad(0);
      })([
        'https://unpkg.com/docsify-copy-code@3/dist/docsify-copy-code.min.js',
        'https://cdn.jsdelivr.net/npm/docsify-copy-code@3/dist/docsify-copy-code.min.js',
        'https://cdnjs.cloudflare.com/ajax/libs/docsify-copy-code/3.0.0/docsify-copy-code.min.js'
      ]);
    </script>

    <!-- ===== å…ˆæŒ‚ Docsify é…ç½® ===== -->
    <script>
      window.$docsify = {
        name: 'Aurora Luo',
        repo: '',
        loadSidebar: true,
        subMaxLevel: 2,
        auto2top: true,
        routerMode: 'hash',     // SPA hash è·¯ç”±ï¼Œé€‚åˆ GitHub Pages
        relativePath: true,     // ç›¸å¯¹è·¯å¾„æ£€ç´¢ README / _sidebar
        search: { paths: 'auto', placeholder: 'æœç´¢æ–‡æ¡£â€¦', noData: 'æœªæ‰¾åˆ°ç»“æœ' },
        plugins: [
          function (hook, vm) {
            function getAnchorOffset() {
              const nav = document.querySelector('.app-nav');
              const navH = nav ? nav.getBoundingClientRect().height : 52;
              const bar = document.querySelector('#reading-progress')
                        || document.querySelector('.progress')
                        || document.querySelector('.progressbar');
              const barH = bar ? bar.getBoundingClientRect().height : 6;
              return Math.round(navH + barH + 10);
            }
            function smartScrollFix() {
              if (!location.hash) return;
              const el = document.querySelector(decodeURIComponent(location.hash));
              if (!el) return;
              setTimeout(() => {
                const y = Math.max(0, window.pageYOffset - getAnchorOffset());
                window.scrollTo({ top: y }); // åŒæ­¥æ»šåŠ¨æ›´ç¨³
              }, 0);
            }
            hook.doneEach(() => {
              smartScrollFix();
              if (window.__auroraBackToTopUpdate) window.__auroraBackToTopUpdate();
            });
            window.addEventListener('hashchange', smartScrollFix, false);
          },
        ],
      };
    </script>

    <!-- ===== ç«™ç‚¹åŠŸèƒ½è„šæœ¬ï¼šä¸»é¢˜åˆ‡æ¢ / è¿›åº¦æ¡ / å›é¡¶ ===== -->
    <script>
      // ä¸»é¢˜åˆ‡æ¢
      (function () {
        const btn = document.getElementById('theme-switch-btn');
        const KEY = 'aurora_theme';
        const root = document.documentElement;

        function apply(theme) {
          if (theme === 'dark') {
            root.setAttribute('data-theme', 'dark');
            btn.textContent = 'ğŸŒ';
            btn.setAttribute('aria-label', 'åˆ‡æ¢åˆ°äº®è‰²ä¸»é¢˜');
          } else {
            root.removeAttribute('data-theme');
            btn.textContent = 'ğŸŒ“';
            btn.setAttribute('aria-label', 'åˆ‡æ¢åˆ°æš—è‰²ä¸»é¢˜');
          }
        }
        function getTheme() { return localStorage.getItem(KEY) || 'light'; }
        function toggle() {
          const next = getTheme() === 'dark' ? 'light' : 'dark';
          localStorage.setItem(KEY, next);
          apply(next);
        }
        apply(getTheme());
        btn.addEventListener('click', toggle);

        new MutationObserver(() => apply(getTheme()))
          .observe(document.body, { childList: true, subtree: true });
      })();

      // é˜…è¯»è¿›åº¦æ¡
      (function () {
        const bar = document.getElementById('reading-progress');
        if (!bar) return;
        function update() {
          const article = document.querySelector('.content');
          if (!article) { bar.style.width = '0%'; return; }
          const total = article.scrollHeight - window.innerHeight;
          const scrolled = window.scrollY - article.offsetTop;
          const pct = Math.max(0, Math.min(1, scrolled / Math.max(1, total)));
          bar.style.width = (pct * 100) + '%';
        }
        window.addEventListener('scroll', update, { passive: true });
        window.addEventListener('resize', update);
        document.addEventListener('DOMContentLoaded', update);
      })();

      // å›åˆ°é¡¶éƒ¨ï¼ˆæš´éœ²åˆ·æ–°å‡½æ•°ï¼‰
      (function () {
        const btn = document.getElementById('back-to-top');
        function updateVisibility() {
          if (window.scrollY > 300) btn.classList.add('show');
          else btn.classList.remove('show');
        }
        btn.addEventListener('click', () =>
          window.scrollTo({ top: 0, behavior: 'smooth' })
        );
        window.addEventListener('scroll', updateVisibility, { passive: true });
        window.__auroraBackToTopUpdate = updateVisibility;
        updateVisibility();
      })();
    </script>

    <!-- ===== å…œåº•æç¤ºï¼š3 ç§’åä»æœªå°±ç»ªï¼Œç»™å‡ºå¸¸è§åŸå›  ===== -->
    <script>
      setTimeout(() => {
        // Docsify æŒ‚è½½åä¼šæŠŠ #app å†…å®¹æ›¿æ¢ä¸ºæ­£æ–‡
        if (!window.Docsify) {
          const el = document.getElementById('app');
          el.innerHTML =
            'ğŸš§ é¡µé¢æœªèƒ½åŠ è½½ã€‚å¸¸è§åŸå› ï¼š<br>' +
            '1) CDN è¢«æ‹¦ï¼ˆå·²å†…ç½®å¤šé‡å›è½ï¼Œå¯åˆ·æ–° / æ¢ç½‘ç»œï¼‰ï¼›<br>' +
            '2) GitHub Pages æœªæŒ‡å‘æ­£ç¡®åˆ†æ”¯/è·¯å¾„ï¼ˆSettings â†’ Pagesï¼‰ï¼›<br>' +
            '3) æ ¹ç›®å½•ç¼ºå°‘ <code>README.md</code>ï¼›<br>' +
            '4) æœªåˆ›å»º <code>.nojekyll</code>ã€‚';
        }
      }, 3000);
    </script>
  </body>
</html>
