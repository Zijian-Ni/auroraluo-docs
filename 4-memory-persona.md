# ğŸ’ è®°å¿†ä¸ç”»åƒï¼ˆMemory & Persona Systemï¼‰

> ğŸ§  **æå…‰å°è½çš„å¤§è„‘ç»“æ„**ï¼šè®©å¥¹æ—¢èƒ½â€œè®°å¾—ä½â€ï¼Œåˆèƒ½â€œç†è§£æ·±â€ã€‚  
> æœ¬ç« ä»‹ç»ä»ã€Œä¸ªä½“ç”»åƒã€åˆ°ã€Œé•¿æœŸè’¸é¦è®°å¿†ã€çš„äº”å±‚ç³»ç»Ÿè®¾è®¡ã€‚

---

## ğŸŒˆ ä¸€ã€æ€»è§ˆç»“æ„å›¾

> å°è½çš„è®°å¿†åˆ†ä¸ºäº”ä¸ªå±‚æ¬¡ï¼Œæ¯å±‚éƒ½æœ‰è¾“å…¥æ¥æºã€æ›´æ–°å‘¨æœŸå’Œä½¿ç”¨åœºæ™¯ã€‚

```mermaid
graph TD
  A[ğŸ’ Persona<br>ç”¨æˆ·ç”»åƒ] --> B[ğŸ“˜ Episodic Memory<br>æƒ…èŠ‚è®°å¿†]
  B --> C[ğŸ” Semantic Memory<br>è¯­ä¹‰è®°å¿†]
  C --> D[ğŸ‘¥ Group Memory<br>ç¾¤ä½“è®°å¿†]
  D --> E[ğŸ§ª Distilled Memory<br>è’¸é¦è®°å¿†]
```

| å±‚çº§ | åç§° | æè¿° | æ›´æ–°é¢‘ç‡ | å­˜å‚¨æ–‡ä»¶ |
|------|------|------|------------|-------------|
| ğŸ’ 1 | Persona | ç”¨æˆ·ç”»åƒï¼šæ˜µç§°ã€å£å¤´ç¦…ã€å¿ƒæƒ…ã€å¥½æ„Ÿåº¦ | åŠ¨æ€ | `persona.py` |
| ğŸ“˜ 2 | Episodic | è¿‘æœŸå¯¹è¯ä¸äº‹ä»¶è®°å½• | æ¯ä¼šè¯ | `memory_store.json` |
| ğŸ” 3 | Semantic | å…´è¶£ã€æŠ€èƒ½ã€ç¦å¿Œæ ‡ç­¾ | æ¯ 1~3 å¤© | `semantic_profile.json` |
| ğŸ‘¥ 4 | Group | ç¾¤äº‹å®ã€çƒ­è¯ã€Topæˆå‘˜æ¦œ | æ¯ 12 å°æ—¶ | `group_memory.db` |
| ğŸ§ª 5 | Distilled | é•¿æœŸè’¸é¦è®°å¿†ï¼ˆæ€»ç»“ç²¾åï¼‰ | æ¯å‘¨ | `memory_distill.py` |

---

## ğŸ’ äºŒã€Personaï¼ˆç”¨æˆ·ç”»åƒï¼‰

| å­—æ®µ | ç±»å‹ | ç¤ºä¾‹å€¼ |
|------|------|---------|
| `nickname` | string | â€œå°å¯çˆ±â€ |
| `catchphrase` | string | â€œå¥½è€¶ï½â€ |
| `mood` | string | â€œæ´»æ³¼ â˜€ï¸â€ |
| `affinity` | float | 0.87 |
| `interests` | list | ["çŸ¥è¯†æ•´ç†", "MCå»ºç­‘", "è®¡åˆ’åˆ¶ä½œ"] |
| `banned_topics` | list | ["æ”¿æ²»", "æˆäººè¯é¢˜"] |

> ğŸ’¡ **ç‰¹ç‚¹ï¼š**
> - æ¯æ¬¡å”¤é†’éƒ½ä¼šæ›´æ–° `mood` ä¸ `affinity`ã€‚  
> - `describe_current_state()` ä¼šç”Ÿæˆä¸­æ–‡ç®€ä»‹å¹¶åµŒå…¥ System Promptã€‚  

---

## ğŸ“˜ ä¸‰ã€Episodic Memoryï¼ˆæƒ…èŠ‚è®°å¿†ï¼‰

```json
{
  "conversation_id": "2025-10-24T22:05:11Z",
  "entries": [
    {"role": "user", "content": "å¸®æˆ‘è§„åˆ’ä¸€ä¸ªä»»åŠ¡ç³»ç»Ÿ"},
    {"role": "assistant", "content": "ï¼ˆè®¤çœŸè®°å½•ï¼‰å¥½å“’å–µ~ å·²ç»ä¸ºä½ èµ·è‰ä¸‰ä¸ªé˜¶æ®µã€‚"}
  ]
}
```

> âš™ï¸ **ç”¨é€”ï¼š**
> - æ”¯æ’‘è¿ç»­ä»»åŠ¡å’Œä¸Šä¸‹æ–‡ç†è§£ï¼›
> - é¿å…é‡å¤æé—®ï¼›
> - æé«˜â€œè®°å¿†æ„Ÿâ€å’Œäº²å¯†åº¦ã€‚

---

## ğŸ” å››ã€Semantic Memoryï¼ˆè¯­ä¹‰è®°å¿†ï¼‰

| ç±»å‹ | ç¤ºä¾‹ |
|------|------|
| ğŸ¯ å…´è¶£æ ‡ç­¾ | â€œè®¡åˆ’æ§â€ã€â€œæ—¶é—´ç®¡ç†â€ |
| ğŸ’¡ æŠ€èƒ½æ ‡ç­¾ | â€œPython ç¼–ç¨‹â€ã€â€œæ•°æ®åˆ†æâ€ |
| ğŸš« ç¦å¿Œæ ‡ç­¾ | â€œä¸å–œæ¬¢å·â€ã€â€œé¿å…è®¨è®ºéšç§â€ |

```json
{
  "id": "user_123",
  "interests": ["æŠ€æœ¯æ–‡æ¡£", "AIå¯¹è¯"],
  "skills": ["ç¿»è¯‘", "å†™ä½œ"],
  "avoid": ["å…«å¦", "æˆäººå†…å®¹"]
}
```

---

## ğŸ‘¥ äº”ã€Group Memoryï¼ˆç¾¤ç»„è®°å¿†ï¼‰

> ğŸ“¡ èšåˆå¤šä¸ªæˆå‘˜çš„äº¤äº’ï¼Œå½¢æˆç¾¤çº§çŸ¥è¯†ä¸ç¤¾ä¼šå…³ç³»å›¾ã€‚

```mermaid
graph LR
A[ç¾¤å¯¹è¯æµ] --> B[å…³é”®è¯æå–å™¨]
B --> C[çƒ­è¯æ¦œ HotWords]
B --> D[ç¾¤äº‹å® GroupFacts]
C & D --> E[ç¾¤ç”»åƒ GroupProfile]
```

> ğŸ’¬ ä¾‹ï¼š  
> â€œæœ€è¿‘ 24h ç¾¤çƒ­è¯ï¼šAI æ¨¡å—ã€å¯è§†åŒ–ã€å°è½çœŸå¯çˆ± ğŸ¥°â€  
> â€œTop3 æ´»è·ƒæˆå‘˜ï¼šæ˜Ÿé­‚ã€Pigeonã€Jellyfishâ€

---

## ğŸ§ª å…­ã€Distilled Memoryï¼ˆè’¸é¦è®°å¿†ï¼‰

```text
- [å­¦ä¹ ] ç”¨æˆ·æŒæ¡äº† Prompt ç¼–å†™æŠ€å·§
- [åˆä½œ] ä¸ç¾¤æˆå‘˜åä½œå®Œæˆæ’ä»¶è°ƒè¯•
- [å…´è¶£] æœ€è¿‘åå¥½ä¸»é¢˜ï¼šè§†è§‰AIä¸MCè‡ªåŠ¨åŒ–
```

> ğŸ§© æ¯å‘¨è¿è¡Œ `memory_distill.py` è‡ªåŠ¨è§¦å‘è’¸é¦ä»»åŠ¡ã€‚

---

## ğŸ’¡ ä¸ƒã€ç³»ç»Ÿåä½œæµç¨‹

```mermaid
sequenceDiagram
  autonumber
  participant U as ç”¨æˆ·
  participant A as Assistant
  participant P as Persona
  participant E as Episodic
  participant S as Semantic
  participant G as Group
  participant D as Distilled
  U->>A: å‘èµ·å¯¹è¯
  A->>P: è¯»å–æ˜µç§°ã€å¿ƒæƒ…
  A->>E: æ³¨å…¥ä¸Šæ¬¡å¯¹è¯ç‰‡æ®µ
  A->>S: æ£€ç´¢å…´è¶£ä¸æŠ€èƒ½
  A->>G: æ£€ç´¢ç¾¤è®°å¿†
  A->>D: æ±‡æ€»é•¿æœŸè®°å¿†
  A->>U: å›å¤å¹¶æ›´æ–°æ‰€æœ‰è®°å¿†å±‚
```

---

> â¬…ï¸ è¿”å›ï¼š[Aurora AI Assistantï¼ˆè¯¦ç»†æ‹†è§£ï¼‰](README.md)
